http:
  routers:
    # Router 1: Protected by Password
    router0:
      entryPoints:
        - web
      service: hello-world
      rule: "Path(`/hello-world`)"
      middlewares:
        - basic-auth

    # Router 2: Public Guestbook (No Password)
    guest-router:
      entryPoints:
        - web
      service: guestbook-service
      rule: "Path(`/guestbook`)"

  services:
    # Service 1
    hello-world:
      loadBalancer:
        servers:
          - url: "http://localhost:9080/"
    
    # Service 2 (weight round robin)
    guestbook-service:
      weighted:
        services:
          - name: guestv1
            weight: 3
          - name: guestv2
            weight: 1
        sticky:
          cookie:
            httpOnly: true
            
    guestv1:
      loadBalancer:
        sticky:
          cookie:
            httpOnly: true
        servers:
          - url: "http://localhost:9081"
          - url: "http://localhost:9082"
          
    guestv2:
      loadBalancer:
        servers:
          - url: "http://localhost:9083"
  
  # Middlewares
  middlewares:
    basic-auth:
      basicAuth:
        users:
          - "admin@123:$1$vLxrG/..$C26y51I5rFGYFYUkA3OxQ."
